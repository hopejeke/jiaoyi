-- 修复表结构注释的编码问题
SET NAMES utf8mb4;
USE jiaoyi;

-- 修复stores表的字段注释
ALTER TABLE stores MODIFY COLUMN id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT CHAR(0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0x49, 0x44);
ALTER TABLE stores MODIFY COLUMN store_name VARCHAR(200) NOT NULL COMMENT CHAR(0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0xE5, 0x90, 0x8D, 0xE7, 0xA7, 0xB0);
ALTER TABLE stores MODIFY COLUMN store_code VARCHAR(50) NOT NULL COMMENT CHAR(0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0xE7, 0xBC, 0x96, 0xE7, 0xA0, 0x81);
ALTER TABLE stores MODIFY COLUMN description TEXT COMMENT CHAR(0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0xE6, 0x8F, 0x8F, 0xE8, 0%BF, 0xB0);
ALTER TABLE stores MODIFY COLUMN owner_name VARCHAR(100) COMMENT CHAR(0xE5, 0xBA, 0x97, 0xE4, 0xB8, 0xBB, 0xE5, 0xA7, 0x93, 0xE5, 0x90, 0x8D);
ALTER TABLE stores MODIFY COLUMN owner_phone VARCHAR(20) COMMENT CHAR(0xE5, 0xBA, 0x97, 0xE4, 0xB8, 0xBB, 0xE7, 0x94, 0xB5, 0xE8, 0xAF, 0x9D);
ALTER TABLE stores MODIFY COLUMN address VARCHAR(500) COMMENT CHAR(0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0xE5, 0x9C, 0xB0, 0xE5, 0x9D, 0x80);
ALTER TABLE stores MODIFY COLUMN status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE' COMMENT CHAR(0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0xE7, 0x8A, 0xB6, 0xE6, 0x80, 0x81, 0xEF, 0xBC, 0x9A, 0x41, 0x43, 0x54, 0x49, 0x56, 0x45, 0x2D, 0xE8, 0x90, 0xA5, 0xE4, 0xB8, 0x9A, 0xE4, 0xB8, 0xAD, 0xEF, 0xBC, 0x8C, 0x49, 0x4E, 0x41, 0x43, 0x54, 0x49, 0x56, 0x45, 0x2D, 0xE5, 0xB7, 0xB2, 0xE5, 0x85, 0xB3, 0xE9, 0x97, 0xAD);
ALTER TABLE stores MODIFY COLUMN create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT CHAR(0xE5, 0x88, 0x9B, 0xE5, 0xBB, 0xBA, 0xE6, 0x97, 0xB6, 0xE9, 0x97, 0xB4);
ALTER TABLE stores MODIFY COLUMN update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT CHAR(0xE6, 0x9B, 0xB4, 0xE6, 0x96, 0xB0, 0xE6, 0x97, 0xB6, 0xE9, 0x97, 0xB4);

-- 修复表注释
ALTER TABLE stores COMMENT = CHAR(0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0xE8, 0xA1, 0xA8);

-- 修复store_products表的字段注释
ALTER TABLE store_products MODIFY COLUMN id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT CHAR(0xE8, 0x81, 0x94, 0xE7, 0xB3, 0xBB, 0x49, 0x44);
ALTER TABLE store_products MODIFY COLUMN store_id BIGINT NOT NULL COMMENT CHAR(0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0x49, 0x44);
ALTER TABLE store_products MODIFY COLUMN product_id BIGINT NOT NULL COMMENT CHAR(0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0x49, 0x44);
ALTER TABLE store_products MODIFY COLUMN stock_quantity INT NOT NULL DEFAULT 0 COMMENT CHAR(0xE8, 0xAF, 0xA5, 0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0xE5, 0xBA, 0x93, 0xE5, 0xAD, 0x98, 0xE6, 0x95, 0xB0, 0xE9, 0x87, 0x8F);
ALTER TABLE store_products MODIFY COLUMN price DECIMAL(10,2) COMMENT CHAR(0xE8, 0xAF, 0xA5, 0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0xE4, 0xBB, 0xB7, 0xE6, 0xA0, 0xBC, 0xEF, 0xBC, 0x88, 0xE5, 0xA6, 0x82, 0xE6, 0x9E, 0x9C, 0xE4, 0xB8, 0xBA, 0xE7, 0xA9, 0xBA, 0xE5, 0x88, 0x99, 0xE4, 0xBD, 0xBF, 0xE7, 0x94, 0xA8, 0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0xE8, 0xA1, 0xA8, 0xE4, 0xBB, 0xB7, 0xE6, 0xA0, 0xBC, 0xEF, 0xBC, 0x89);
ALTER TABLE store_products MODIFY COLUMN status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE' COMMENT CHAR(0xE8, 0x81, 0x94, 0xE7, 0xB3, 0xBB, 0xE7, 0x8A, 0xB6, 0xE6, 0x80, 0x81, 0xEF, 0xBC, 0x9A, 0x41, 0x43, 0x54, 0x49, 0x56, 0x45, 0x2D, 0xE4, 0xB8, 0x8A, 0xE6, 0x9E, 0xB6, 0xEF, 0xBC, 0x8C, 0x49, 0x4E, 0x41, 0x43, 0x54, 0x49, 0x56, 0x45, 0x2D, 0xE4, 0xB8, 0x8B, 0xE6, 0x9E, 0xB6);
ALTER TABLE store_products MODIFY COLUMN create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT CHAR(0xE5, 0x88, 0x9B, 0xE5, 0xBB, 0xBA, 0xE6, 0x97, 0xB6, 0xE9, 0x97, 0xB4);
ALTER TABLE store_products MODIFY COLUMN update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT CHAR(0xE6, 0x9B, 0xB4, 0xE6, 0x96, 0xB0, 0xE6, 0x97, 0xB6, 0xE9, 0x97, 0xB4);

-- 修复表注释
ALTER TABLE store_products COMMENT = CHAR(0xE5, 0xBA, 0x97, 0xE9, 0x93, 0xBA, 0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0xE8, 0x81, 0x94, 0xE7, 0xB3, 0xBB, 0xE8, 0xA1, 0xA8);

-- 修复其他表的注释（如果也有乱码问题）
ALTER TABLE products MODIFY COLUMN id BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT CHAR(0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0x49, 0x44);
ALTER TABLE products MODIFY COLUMN product_name VARCHAR(200) NOT NULL COMMENT CHAR(0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0xE5, 0x90, 0x8D, 0xE7, 0xA7, 0xB0);
ALTER TABLE products MODIFY COLUMN description TEXT COMMENT CHAR(0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0xE6, 0x8F, 0x8F, 0xE8, 0xBF, 0xB0);
ALTER TABLE products MODIFY COLUMN unit_price DECIMAL(10,2) NOT NULL COMMENT CHAR(0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0xE5, 0x8D, 0x95, 0xE4, 0xBB, 0xB7);
ALTER TABLE products MODIFY COLUMN product_image VARCHAR(500) COMMENT CHAR(0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0xE5, 0x9B, 0xBE, 0xE7, 0x89, 0x87);
ALTER TABLE products MODIFY COLUMN category VARCHAR(100) COMMENT CHAR(0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0xE5, 0x88, 0x86, 0xE7, 0xB1, 0xBB);
ALTER TABLE products MODIFY COLUMN status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE' COMMENT CHAR(0xE5, 0x95, 0x86, 0xE5, 0x93, 0x81, 0xE7, 0x8A, 0xB6, 0xE6, 0x80, 0x81, 0xEF, 0xBC, 0x9A, 0x41, 0x43, 0x54, 0x49, 0x56, 0x45, 0x2D, 0xE4, 0xB8, 0x8A, 0xE6, 0x9E, 0xB6, 0xEF, 0xBC, 0x8C, 0x49, 0x4E, 0x41, 0x43, 0x54, 0x49, 0x56, 0x45, 0x2D, 0xE4, 0xB8, 0x8B, 0xE6, 0x9E, 0xB6);
ALTER TABLE products MODIFY COLUMN create_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT CHAR(0xE5, 0x88, 0x9B, 0xE5, 0xBB, 0xBA, 0xE6, 0x97, 0xB6, 0xE9, 0x97, 0xB4);
ALTER TABLE products MODIFY COLUMN update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT CHAR(0xE6, 0x9B, 0xB4, 0xE6, 0x96, 0xB9, 0xE6, 0x97, 0xB6, 0xE9, 0x97, 0xB4);

SELECT '表注释修复完成！请刷新表结构查看。' AS message;

